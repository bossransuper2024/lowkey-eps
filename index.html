<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Korean EPS Vocabulary Mastering</title>

<link rel="stylesheet" href="style.css">
</head>
<body>

<div class="container">
<h1>Korean EPS Vocabulary Mastering</h1>

<!-- MODE MENU -->
<div id="modeMenu">
<h2>Select Mode</h2>
<button onclick="setMode(1)">1Ô∏è‚É£ Hangul ‚Üí Reveal</button>
<button onclick="setMode(2)">2Ô∏è‚É£ Hangul + Reveal Auto</button>
<button onclick="setMode(3)">3Ô∏è‚É£ Hangul + Meaning Only</button>
</div>

<!-- CATEGORY MENU -->
<div id="categoryMenu" class="hidden">
<h2>Select Category</h2>
<div id="categories"></div>
<button onclick="backToMode()">‚¨Ö Back</button>
</div>

<!-- FLASHCARD -->
<div id="flashcard" class="hidden">
<h2 id="categoryTitle"></h2>
<div class="card" id="hangul"></div>

<button id="speakBtn" onclick="speakHangul()">üîä Pronounce</button>

<div class="sub hidden" id="romanization"></div>
<div class="sub hidden" id="meaning"></div>

<br><br>
<button onclick="nextWord()">Next</button>
<button onclick="backToMode()">‚¨Ö Back</button>
</div>

</div>

<script>

let vocabData = {
  "Work": [
    { "hangul": "Ïùº", "romanization": "il", "meaning": "work" },
    { "hangul": "ÌöåÏÇ¨", "romanization": "hoesa", "meaning": "company" }
  ],
  "Food": [
    { "hangul": "Î∞•", "romanization": "bap", "meaning": "rice / meal" },
    { "hangul": "Î¨º", "romanization": "mul", "meaning": "water" }
  ]
};

let currentCategory = "";
let currentIndex = 0;
let mode = 1;

/* ===== MODE ===== */
function setMode(selectedMode){
    mode = selectedMode;
    document.getElementById('modeMenu').classList.add('hidden');
    document.getElementById('categoryMenu').classList.remove('hidden');
    loadCategories();
}

function backToMode(){
    document.getElementById('flashcard').classList.add('hidden');
    document.getElementById('categoryMenu').classList.add('hidden');
    document.getElementById('modeMenu').classList.remove('hidden');
}

/* ===== LOAD CATEGORIES ===== */
function loadCategories(){
    let catDiv = document.getElementById('categories');
    catDiv.innerHTML = "";
    for(let category in vocabData){
        let btn = document.createElement('button');
        btn.innerText = category;
        btn.onclick = () => selectCategory(category);
        catDiv.appendChild(btn);
    }
}

/* ===== SELECT CATEGORY ===== */
function selectCategory(category){
    currentCategory = category;
    currentIndex = 0;
    document.getElementById('categoryMenu').classList.add('hidden');
    document.getElementById('flashcard').classList.remove('hidden');
    document.getElementById('categoryTitle').innerText = category;
    showWord();
}

/* ===== SHOW WORD ===== */
function showWord(){
    let word = vocabData[currentCategory][currentIndex];

    document.getElementById('hangul').innerText = word.hangul;
    document.getElementById('romanization').innerText = word.romanization;
    document.getElementById('meaning').innerText = word.meaning;

    document.getElementById('romanization').classList.add('hidden');
    document.getElementById('meaning').classList.add('hidden');

    if(mode === 2){
        reveal();
    }
    if(mode === 3){
        document.getElementById('meaning').classList.remove('hidden');
    }
}

/* ===== REVEAL ===== */
function reveal(){
    document.getElementById('romanization').classList.remove('hidden');
    document.getElementById('meaning').classList.remove('hidden');
}

/* ===== NEXT ===== */
function nextWord(){
    currentIndex++;
    if(currentIndex >= vocabData[currentCategory].length){
        currentIndex = 0;
    }
    showWord();
}

/* ===== SPACEBAR REVEAL ===== */
document.addEventListener('keydown', function(e){
    if(e.code === 'Space' && mode === 1){
        e.preventDefault();
        reveal();
    }
});

/* ===== CLICK REVEAL ===== */
document.getElementById('hangul').addEventListener('click', function(){
    if(mode === 1){
        reveal();
    }
});

/* ===== SPEAK FUNCTION ===== */
function speakHangul() {
    const text = document.getElementById('hangul').innerText;
    if (!text) return;

    const utterance = new SpeechSynthesisUtterance(text);
    utterance.lang = "ko-KR";
    utterance.rate = 0.9;

    const voices = speechSynthesis.getVoices();
    const koreanVoice = voices.find(v => v.lang === "ko-KR");
    if (koreanVoice) utterance.voice = koreanVoice;

    speechSynthesis.cancel();
    speechSynthesis.speak(utterance);
}

</script>

</body>
</html>
